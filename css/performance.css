/* ═══════════════════ Performance Optimizations ═══════════════════ */

/* Containment */
.inv-slot, .craft-item { contain: layout style paint; }
#stats, #hotbar, .action-buttons { contain: layout; }

/* GPU compositing for animated elements */
#joystick-thumb { transform: translateZ(0); backface-visibility: hidden; }

/* Text rendering */
body { text-rendering: optimizeSpeed; }

/* ═══════════════════ Low Power / Low Quality Modes ═══════════════════ */
html.tu-low-power {
    --hud-blur: 0px;
    --glass-blur: 0px;
    --tu-glass-blur: 0px;
    --glow: 0 0 0 rgba(0, 0, 0, 0);
    --glow-shadow: none;
    --hud-shadow: 0 10px 24px rgba(0, 0, 0, 0.42), 0 0 0 1px rgba(255, 255, 255, 0.06) inset;
}

html.tu-quality-low {
    --hud-blur: 6px;
    --glass-blur: 6px;
    --tu-glass-blur: 8px;
    --hud-shadow: 0 10px 28px rgba(0, 0, 0, 0.46), 0 0 0 1px rgba(255, 255, 255, 0.06) inset;
}

/* Disable backdrop-filter in low modes */
html.tu-low-power .top-btn,
html.tu-low-power .toast,
html.tu-low-power .ux-panel,
html.tu-low-power #inventory-panel,
html.tu-low-power #crafting-panel,
html.tu-low-power #hotbar,
html.tu-low-power #minimap,
html.tu-low-power #info,
html.tu-low-power #mining-bar,
html.tu-low-power .stat-bar,
html.tu-low-power #inv-held,
html.tu-quality-low .top-btn,
html.tu-quality-low .toast,
html.tu-quality-low .ux-panel,
html.tu-quality-low #inventory-panel,
html.tu-quality-low #crafting-panel,
html.tu-quality-low #hotbar,
html.tu-quality-low #minimap,
html.tu-quality-low #info,
html.tu-quality-low #mining-bar,
html.tu-quality-low .stat-bar,
html.tu-quality-low #inv-held {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
}

/* Disable decorative animations in low modes */
html.tu-low-power #health-fill::after,
html.tu-low-power #mana-fill::after,
html.tu-low-power .slot.active::before,
html.tu-low-power #mining-bar .fill,
html.tu-low-power #mining-bar .fill::after,
html.tu-quality-low #health-fill::after,
html.tu-quality-low #mana-fill::after,
html.tu-quality-low .slot.active::before,
html.tu-quality-low #mining-bar .fill,
html.tu-quality-low #mining-bar .fill::after {
    animation: none;
}

/* Hide ambient particles in low modes */
html.tu-low-power #ambient-particles,
html.tu-quality-low #ambient-particles {
    display: none;
}

/* Disable icon filters in low modes */
html.tu-low-power .stat-bar .icon,
html.tu-quality-low .stat-bar .icon {
    filter: none;
}

/* No-backdrop fallback */
html.no-backdrop .top-btn,
html.no-backdrop .toast,
html.no-backdrop .ux-panel,
html.no-backdrop #inventory-panel,
html.no-backdrop #crafting-panel,
html.no-backdrop #hotbar,
html.no-backdrop #minimap,
html.no-backdrop #info,
html.no-backdrop #mining-bar,
html.no-backdrop .stat-bar,
html.no-backdrop #inv-held {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background: rgba(15, 18, 40, 0.92);
    border-color: rgba(255, 255, 255, 0.18);
}

html.no-backdrop .ux-overlay,
html.no-backdrop #inventory-overlay,
html.no-backdrop #crafting-overlay {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
}

/* ═══════════════════ Reduced Motion ═══════════════════ */
@media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
        animation-duration: 0.01ms;
        animation-iteration-count: 1;
        transition-duration: 0.01ms;
    }
    
    /* Also disable backdrop-filter for reduced motion */
    .ux-overlay,
    .ux-panel,
    #inventory-panel,
    #crafting-panel {
        backdrop-filter: none;
        -webkit-backdrop-filter: none;
    }
}
